(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8450],{852:(e,t,a)=>{"use strict";a.d(t,{default:()=>o});var i=a(95155),n=a(12115),r=a(17238);let o=()=>{let[e,t]=(0,n.useState)(!1),[a,o]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{let e=!1,a=()=>{e||(window.requestAnimationFrame(()=>{t(window.scrollY>=712),e=!1}),e=!0)};return a(),window.addEventListener("scroll",a,{passive:!0}),()=>window.removeEventListener("scroll",a)},[]),e)?(0,i.jsx)("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onFocus:()=>o(!0),onBlur:()=>o(!1),className:"\n        fixed bottom-6 right-6 md:bottom-8 md:right-8 \n        p-2 md:p-3 rounded-full shadow-lg z-50\n        bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm\n        hover:bg-white dark:hover:bg-gray-700\n        ring-1 ring-gray-200/50 dark:ring-gray-600/50\n        focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400\n        transition-all duration-300\n        ".concat(a?"scale-110 shadow-xl":"scale-100","\n      "),"aria-label":"Scroll to top",children:(0,i.jsx)(r.A,{className:"\n          w-5 h-5 md:w-6 md:h-6 \n          text-gray-700 dark:text-gray-200\n          transition-transform duration-300\n          ".concat(a?"-translate-y-0.5":"","\n        ")})}):null}},1545:(e,t,a)=>{"use strict";a.d(t,{default:()=>o});var i=a(95155),n=a(12115),r=a(63554);function o(e){let{GA_MEASUREMENT_ID:t,ADS_ID:a}=e;return((0,n.useEffect)(()=>{window.dataLayer||(window.dataLayer=[])},[]),t||a)?(0,i.jsxs)(i.Fragment,{children:[t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.default,{src:"https://www.googletagmanager.com/gtag/js?id=".concat(t),strategy:"afterInteractive",onLoad:()=>{},onError:e=>{}}),(0,i.jsx)(r.default,{id:"google-analytics",strategy:"afterInteractive",onError:e=>{},children:"\n              window.dataLayer = window.dataLayer || [];\n              function gtag(){dataLayer.push(arguments);}\n              gtag('js', new Date());\n              gtag('config', '".concat(t,"', {\n                page_title: document.title,\n                page_location: window.location.href,\n                anonymize_ip: true,\n                allow_google_signals: false,\n                allow_ad_personalization_signals: false\n              });\n            ")})]}),a&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.default,{src:"https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-".concat(a),strategy:"afterInteractive",crossOrigin:"anonymous",onLoad:()=>{},onError:e=>{}}),(0,i.jsx)(r.default,{id:"google-ads-init",strategy:"afterInteractive",onError:e=>{},children:"\n              window.adsbygoogle = window.adsbygoogle || [];\n            "})]})]}):null}},14055:(e,t,a)=>{"use strict";a.d(t,{default:()=>r});var i=a(95155),n=a(64455);function r(e){let{children:t,defaultTheme:a="dark"}=e;return(0,i.jsx)(n.N,{enableSystem:!0,attribute:"class",defaultTheme:a,children:t})}},19324:()=>{},27439:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var i=a(95155),n=a(12115),r=a(5196),o=a(91788),s=a(53904),l=a(27043),d=a(37777);function c(){let[e,t]=(0,n.useState)(null),[a,c]=(0,n.useState)(!1),[u,f]=(0,n.useState)(!1),[p,m]=(0,n.useState)("idle"),[g,h]=(0,n.useState)("idle"),v=(0,l.useTranslations)("PWA");(0,n.useEffect)(()=>{let e=e=>{e.preventDefault(),t(e)},a=async()=>{if("serviceWorker"in navigator)try{let e=await navigator.serviceWorker.ready;e.waiting&&c(!0),e.addEventListener("updatefound",()=>{let t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&c(!0)})}),setInterval(()=>{e.update().catch(console.error)},36e5)}catch(e){}},i=()=>{m("installed"),t(null),setTimeout(()=>{m("idle")},3e3)};return window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",i),a(),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",i)}},[]);let w=async()=>{if(e){m("installing");try{e.prompt();let a=await e.userChoice;"accepted"===a.outcome?(m("installed"),setTimeout(()=>{m("idle"),t(null)},3e3)):m("idle")}catch(e){m("idle")}}},y=async()=>{if("serviceWorker"in navigator){h("updating");try{let e=await navigator.serviceWorker.ready;e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"}),setTimeout(()=>{window.location.reload()},1e3)}catch(e){h("idle")}}};return e||a?(0,i.jsx)("div",{className:"fixed bottom-20 right-6 md:bottom-24 md:right-8 z-50 flex flex-col gap-2",children:(0,i.jsxs)(d.Bc,{children:[e&&(0,i.jsxs)(d.m_,{children:[(0,i.jsx)(d.k$,{asChild:!0,children:(0,i.jsxs)("button",{onClick:w,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),onFocus:()=>f(!0),onBlur:()=>f(!1),disabled:"installing"===p,className:"\n                                    p-2 md:p-3 rounded-full shadow-lg\n                                    bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm\n                                    hover:bg-white dark:hover:bg-gray-700\n                                    ring-1 ring-gray-200/50 dark:ring-gray-600/50\n                                    focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400\n                                    transition-all duration-300\n                                    ".concat(u?"scale-110 shadow-xl":"scale-100","\n                                    ").concat("installing"===p?"opacity-70 cursor-wait":"","\n                                    ").concat("installed"===p?"bg-green-500 dark:bg-green-600 ring-green-400":"","\n                                "),"aria-label":v("installApp"),children:["installed"===p?(0,i.jsx)(r.A,{className:"w-5 h-5 md:w-6 md:h-6 text-white"}):(0,i.jsx)(o.A,{className:"\n                                            w-5 h-5 md:w-6 md:h-6 \n                                            text-gray-700 dark:text-gray-200\n                                            transition-transform duration-300\n                                            ".concat(u?"-translate-y-0.5":"","\n                                            ").concat("installing"===p?"animate-pulse":"","\n                                        ")}),(0,i.jsx)("span",{className:"sr-only",children:v("installApp")})]})}),(0,i.jsx)(d.ZI,{side:"left",className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm",children:(0,i.jsx)("p",{children:v("installAppTooltip")})})]}),a&&(0,i.jsxs)(d.m_,{children:[(0,i.jsx)(d.k$,{asChild:!0,children:(0,i.jsxs)("button",{onClick:y,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),onFocus:()=>f(!0),onBlur:()=>f(!1),disabled:"updating"===g,className:"\n                                    p-2 md:p-3 rounded-full shadow-lg\n                                    bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm\n                                    hover:bg-white dark:hover:bg-gray-700\n                                    ring-1 ring-gray-200/50 dark:ring-gray-600/50\n                                    focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400\n                                    transition-all duration-300\n                                    ".concat(u?"scale-110 shadow-xl":"scale-100","\n                                    ").concat("updating"===g?"opacity-70 cursor-wait":"","\n                                "),"aria-label":v("updateApp"),children:[(0,i.jsx)(s.A,{className:"\n                                        w-5 h-5 md:w-6 md:h-6 \n                                        text-gray-700 dark:text-gray-200\n                                        transition-transform duration-300\n                                        ".concat(u?"-translate-y-0.5":"","\n                                        ").concat("updating"===g?"animate-spin":"","\n                                    ")}),(0,i.jsx)("span",{className:"sr-only",children:v("updateApp")})]})}),(0,i.jsx)(d.ZI,{side:"left",className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm",children:(0,i.jsx)("p",{children:v("updateAppTooltip")})})]})]})}):null}},37777:(e,t,a)=>{"use strict";a.d(t,{Bc:()=>s,ZI:()=>c,k$:()=>d,m_:()=>l});var i=a(95155),n=a(12115),r=a(89613),o=a(53999);let s=r.Kq,l=r.bL,d=r.l9,c=n.forwardRef((e,t)=>{let{className:a,sideOffset:n=4,...s}=e;return(0,i.jsx)(r.ZL,{children:(0,i.jsx)(r.UC,{ref:t,sideOffset:n,className:(0,o.cn)("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s})})});c.displayName=r.UC.displayName},43750:(e,t,a)=>{"use strict";a.d(t,{E:()=>u,NotificationProvider:()=>c});var i=a(95155),n=a(12115),r=a(12108),o=a(76966),s=a(35695);let l={emailNotifications:!0,mentionNotifications:!0,replyNotifications:!0,topicSubscriptionNotifications:!0,forumSubscriptionNotifications:!0,moderationNotifications:!0},d=(0,n.createContext)(void 0);function c(e){var t;let{children:a}=e,{data:c,status:u}=(0,r.useSession)(),[f,p]=(0,n.useState)([]),[m,g]=(0,n.useState)(0),[h,v]=(0,n.useState)(!1),[w,y]=(0,n.useState)(null),[b,x]=(0,n.useState)(l),[E,k]=(0,n.useState)(!1),{toast:j}=(0,o.dj)();(0,s.useRouter)();let N=(0,n.useRef)(null),S=(0,n.useRef)(null),T=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("authenticated"!==u)return;let{limit:t=10,page:a=1,unreadOnly:i=!1,type:n,useCache:r=!0}=e;v(!0),y(null);try{let e=new URLSearchParams({limit:t.toString(),page:a.toString(),...i&&{unread:"true"},...n&&{type:n},...!1===r&&{cache:"false"}}),o=await fetch("/api/forum/notifications?".concat(e.toString()));if(!o.ok)throw Error("Failed to fetch notifications");let s=await o.json();if(s.success)p(s.notifications),g(s.unreadCount);else throw Error(s.message||"Failed to fetch notifications")}catch(e){y(e instanceof Error?e:Error("An unknown error occurred"))}finally{v(!1)}},[u]),A=(0,n.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("authenticated"===u)try{if(!(await fetch("/api/forum/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,interaction:t})})).ok)throw Error("Failed to mark notification as read");p(t=>t.map(t=>t.id===e?{...t,isRead:!0}:t)),g(e=>Math.max(0,e-1))}catch(e){j({title:"Error",description:"Failed to mark notification as read",variant:"destructive"})}},[u,j]),_=(0,n.useCallback)(async()=>{if("authenticated"===u)try{let e=await fetch("/api/forum/notifications",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({all:!0})});if(!e.ok)throw Error("Failed to mark all notifications as read");let t=await e.json();p(e=>e.map(e=>({...e,isRead:!0}))),g(0),j({title:"Success",description:"".concat(t.count," notifications marked as read")})}catch(e){j({title:"Error",description:"Failed to mark all notifications as read",variant:"destructive"})}},[u,j]),C=(0,n.useCallback)(async e=>{if("authenticated"===u)try{var t;if(!(await fetch("/api/forum/notifications/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete notification");p(t=>t.filter(t=>t.id!==e)),(null==(t=f.find(t=>t.id===e))?void 0:t.isRead)===!1&&g(e=>Math.max(0,e-1)),j({title:"Success",description:"Notification deleted"})}catch(e){j({title:"Error",description:"Failed to delete notification",variant:"destructive"})}},[u,j,f]),I=(0,n.useCallback)(async()=>{if("authenticated"===u&&confirm("Are you sure you want to delete all notifications? This action cannot be undone."))try{if(!(await fetch("/api/forum/notifications/clear",{method:"DELETE"})).ok)throw Error("Failed to delete all notifications");p([]),g(0),j({title:"Success",description:"All notifications deleted"})}catch(e){j({title:"Error",description:"Failed to delete all notifications",variant:"destructive"})}},[u,j]),L=(0,n.useCallback)(async()=>{if("authenticated"===u){k(!0);try{let e=await fetch("/api/forum/notifications/preferences");if(!e.ok)throw Error("Failed to fetch notification preferences");let t=await e.json();if(t.success)x(t.preferences);else throw Error(t.message||"Failed to fetch notification preferences")}catch(e){j({title:"Error",description:"Failed to load notification preferences",variant:"destructive"})}finally{k(!1)}}},[u,j]),P=(0,n.useCallback)(async e=>{if("authenticated"===u)try{let t=await fetch("/api/forum/notifications/preferences",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...b,...e})});if(!t.ok)throw Error("Failed to update notification preferences");let a=await t.json();if(a.success)x(a.preferences),j({title:"Success",description:"Notification preferences updated successfully"});else throw Error(a.message||"Failed to update notification preferences")}catch(e){j({title:"Error",description:"Failed to update notification preferences",variant:"destructive"})}},[u,b,j]),F=(0,n.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;N.current&&N.current.close();let a=Math.min(1e3*Math.pow(2,t),3e4);t>0?setTimeout(()=>O(e,t),a):O(e,t)},[]),O=(0,n.useCallback)((e,t)=>{let a="/api/forum/notifications/sse?userId=".concat(e);S.current&&(a+="&reconnectId=".concat(S.current));let i=new EventSource(a);i.onopen=()=>{t=0},i.onmessage=e=>{try{let t=JSON.parse(e.data);if("notification"===t.type){p(e=>[t.notification,...e]),g(e=>e+1),j({title:"New Notification",description:t.notification.content});let e=document.getElementById("notification-sound");e&&e.play().catch(e=>{})}else"ping"===t.type||"connected"===t.type&&t.clientId&&(S.current=t.clientId)}catch(e){}},i.onerror=a=>{i.close(),F(e,t+1)},N.current=i},[j,F]);return(0,n.useEffect)(()=>{var e;let t=null==c||null==(e=c.user)?void 0:e.id;if("authenticated"===u&&t)return F(t),T(),L(),()=>{N.current&&(N.current.close(),N.current=null)}},[u,null==c||null==(t=c.user)?void 0:t.id]),(0,i.jsxs)(d.Provider,{value:{notifications:f,unreadCount:m,isLoading:h,error:w,preferences:b,preferencesLoading:E,fetchNotifications:T,markAsRead:A,markAllAsRead:_,deleteNotification:C,deleteAllNotifications:I,updatePreferences:P,fetchPreferences:L},children:[(0,i.jsx)("audio",{id:"notification-sound",src:"/sounds/notification.mp3",preload:"auto"}),a]})}function u(){let e=(0,n.useContext)(d);if(void 0===e)throw Error("useNotifications must be used within a NotificationProvider");return e}},52364:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,19324,23)),Promise.resolve().then(a.bind(a,1545)),Promise.resolve().then(a.bind(a,94861)),Promise.resolve().then(a.bind(a,27439)),Promise.resolve().then(a.bind(a,852)),Promise.resolve().then(a.bind(a,65038)),Promise.resolve().then(a.bind(a,43750)),Promise.resolve().then(a.bind(a,14055)),Promise.resolve().then(a.bind(a,82103)),Promise.resolve().then(a.t.bind(a,74791,23)),Promise.resolve().then(a.t.bind(a,21407,23)),Promise.resolve().then(a.t.bind(a,39935,23)),Promise.resolve().then(a.t.bind(a,44367,23))},53999:(e,t,a)=>{"use strict";a.d(t,{cn:()=>r});var i=a(52596),n=a(39688);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,i.$)(t))}},65038:(e,t,a)=>{"use strict";a.d(t,{Toaster:()=>v});var i=a(95155),n=a(76966),r=a(12115),o=a(26621),s=a(74466),l=a(54416),d=a(53999);let c=o.Kq,u=r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)(o.LM,{ref:t,className:(0,d.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),...n})});u.displayName=o.LM.displayName;let f=(0,s.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),p=r.forwardRef((e,t)=>{let{className:a,variant:n,...r}=e;return(0,i.jsx)(o.bL,{ref:t,className:(0,d.cn)(f({variant:n}),a),...r})});p.displayName=o.bL.displayName,r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)(o.rc,{ref:t,className:(0,d.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",a),...n})}).displayName=o.rc.displayName;let m=r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)(o.bm,{ref:t,className:(0,d.cn)("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",a),"toast-close":"",...n,children:(0,i.jsx)(l.A,{className:"h-4 w-4"})})});m.displayName=o.bm.displayName;let g=r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)(o.hE,{ref:t,className:(0,d.cn)("text-sm font-semibold [&+div]:text-xs",a),...n})});g.displayName=o.hE.displayName;let h=r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,i.jsx)(o.VY,{ref:t,className:(0,d.cn)("text-sm opacity-90",a),...n})});function v(){let{toasts:e}=(0,n.dj)();return(0,i.jsxs)(c,{children:[e.map(function(e){let{id:t,title:a,description:n,action:r,...o}=e;return(0,i.jsxs)(p,{...o,children:[(0,i.jsxs)("div",{className:"grid gap-1",children:[a&&(0,i.jsx)(g,{children:a}),n&&(0,i.jsx)(h,{children:n})]}),r,(0,i.jsx)(m,{})]},t)}),(0,i.jsx)(u,{})]})}h.displayName=o.VY.displayName},76966:(e,t,a)=>{"use strict";a.d(t,{dj:()=>f,oR:()=>u});var i=a(12115);let n=0,r=new Map,o=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},s=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?o(a):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=s(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,a=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),i=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||i()}}}),{id:a,dismiss:i,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function f(){let[e,t]=i.useState(d);return i.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},94861:(e,t,a)=>{"use strict";a.d(t,{default:()=>r});var i=a(95155),n=a(12108);function r(e){let{children:t}=e;return(0,i.jsx)(n.SessionProvider,{children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2533,7067,2848,2427,5061,7043,9613,2108,3304,8441,1684,7358],()=>t(52364)),_N_E=e.O()}]);